<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Beyond Titles - Intelligent Job Title Matching System">
    <title>Beyond Titles</title>
    <link rel="icon" type="image/jpeg" href="assets/favicon.jpg">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header injected by components.js -->

    <main class="main">
        <section class="hero">
            <div class="hero__container">
                <!-- Segmented Control -->
                <div class="segmented-control" role="tablist" aria-label="Tipo di ricerca">
                    <button
                        class="segmented-control__button segmented-control__button--active"
                        role="tab"
                        aria-selected="true"
                        aria-controls="panel-sondaggio"
                        id="tab-sondaggio"
                        data-panel="sondaggio"
                        data-i18n="tab_sondaggio"
                    >Sondaggio</button>
                    <button
                        class="segmented-control__button"
                        role="tab"
                        aria-selected="false"
                        aria-controls="panel-ruolo"
                        id="tab-ruolo"
                        data-panel="ruolo"
                        data-i18n="tab_ruolo"
                    >Ruolo</button>
                </div>

                <!-- Panel Ruolo -->
                <div id="panel-ruolo" class="panel" role="tabpanel" aria-labelledby="tab-ruolo" hidden>
                    <h2 class="hero__title" data-i18n="hero_title">Qual è il tuo ruolo?</h2>
                    <p class="hero__subtitle" data-i18n="hero_subtitle">
                        Digita la tua mansione attuale per verificare la corrispondenza con il nostro database.
                    </p>

                    <div class="search">
                        <div class="search__wrapper">
                        <input
                            type="text"
                            id="jobInput"
                            class="search__input"
                            data-i18n-placeholder="search_placeholder"
                            data-i18n-aria-label="search_aria_label"
                            placeholder="Inizia a scrivere (es. Magazziniere, Barista...)"
                            autocomplete="off"
                            aria-label="Inserisci il tuo ruolo lavorativo"
                            aria-describedby="statusMessage"
                            aria-controls="suggestions"
                            aria-autocomplete="list"
                        >
                        <button
                            type="button"
                            id="clearInput"
                            class="search__clear"
                            data-i18n-aria-label="search_clear"
                            aria-label="Cancella ricerca"
                        >&times;</button>
                        <ul
                            id="suggestions"
                            class="search__suggestions"
                            role="listbox"
                            aria-label="Suggerimenti mansioni"
                        ></ul>
                    </div>

                    <a href="#" id="suggestionsLink" class="search__suggestions-link" data-i18n="suggestions_link">Suggerimenti</a>

                    <div id="statusMessage" class="search__status" role="status" aria-live="polite"></div>

                    <a
                        id="ctaButton"
                        href="#"
                        class="cta-button cta-button--disabled"
                        aria-disabled="true"
                        tabindex="-1"
                        data-i18n="cta_default"
                    >
                        Vedi Offerte
                    </a>
                    </div>
                </div>

                <!-- Panel Sondaggio (default) -->
                <div id="panel-sondaggio" class="panel panel--active" role="tabpanel" aria-labelledby="tab-sondaggio">
                    <div class="survey">
                        <!-- Survey Intro -->
                        <div id="survey-intro" class="survey__intro">
                            <h2 class="hero__title" data-i18n="survey_title">Beyond Titles</h2>
                            <p class="hero__subtitle" data-i18n-html="survey_subtitle">
                                <strong>Cosa ti rende unico? Scopri il tuo profilo.</strong> Attraverso 10 situazioni che capitano a tutti nel lavoro, nello studio, nella vita quotidiana, scopri ciò che rende unico il tuo profilo professionale. Segui il tuo istinto: non ci sono risposte giuste o sbagliate.
                            </p>
                            <button id="survey-start" class="survey__start-btn" data-i18n="survey_start">
                                Inizia il Sondaggio
                            </button>
                            <a href="#" id="surveyPresetsLink" class="search__suggestions-link" data-i18n="survey_presets_link">Suggerimenti</a>
                        </div>

                        <!-- Survey Questions -->
                        <div id="survey-questions" class="survey__questions" hidden>
                            <div class="survey__progress">
                                <div class="survey__progress-bar">
                                    <div id="survey-progress-fill" class="survey__progress-fill"></div>
                                </div>
                                <span id="survey-progress-text" class="survey__progress-text">Domanda 1 di 10</span>
                            </div>

                            <div id="survey-question-container" class="survey__question-container">
                                <!-- Question will be rendered here -->
                            </div>

                            <div class="survey__navigation">
                                <button id="survey-prev" class="survey__nav-btn survey__nav-btn--secondary" disabled data-i18n="survey_prev">Indietro</button>
                                <button id="survey-next" class="survey__nav-btn survey__nav-btn--primary" disabled data-i18n="survey_next">Avanti</button>
                            </div>
                        </div>

                        <!-- Survey Results -->
                        <div id="survey-results" class="survey__results" hidden>
                            <div id="survey-results-content">
                                <!-- Results will be rendered here -->
                            </div>
                            <button id="survey-restart" class="survey__restart-btn" data-i18n="survey_restart">
                                Rifai il Test
                            </button>
                        </div>
                        <p class="survey__version-label">Behavioural &amp; Competency-Based v3.3</p>
                    </div>
                </div>
            </div>
        </section>

        <aside class="system-log">
            <div class="system-log__header">
                <span class="system-log__title" data-i18n="log_title">System Activity Log</span>
                <button id="clearLogBtn" class="system-log__clear" data-i18n="log_clear" data-i18n-aria-label="log_aria_clear" aria-label="Pulisci log">Clear</button>
            </div>
            <div id="systemLog" class="system-log__content" role="log" aria-live="polite" data-i18n-aria-label="log_aria_label" aria-label="Log attività sistema"></div>
        </aside>
    </main>

    <!-- Footer injected by components.js -->

    <!-- Modal Suggerimenti -->
    <div id="suggestionsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal__backdrop"></div>
        <div class="modal__content">
            <div class="modal__header">
                <h3 id="modalTitle" class="modal__title" data-i18n="modal_title">Esempi di ricerche</h3>
                <button id="modalCloseBtn" class="modal__close" data-i18n-aria-label="modal_close" aria-label="Chiudi">&times;</button>
            </div>
            <div class="modal__body">
                <div class="modal__example">
                    <h4 class="modal__example-title">
                        <span class="modal__example-badge modal__example-badge--primary" data-i18n="modal_example1_badge">Categoria Principale</span>
                        <span class="modal__example-name" data-i18n="modal_example1_search">Addetto alla vendita retail</span>
                        <button class="modal__copy-btn" data-copy="Addetto alla vendita retail" data-i18n-aria-label="modal_copy" aria-label="Copia">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </h4>
                    <p class="modal__example-text" data-i18n="modal_example1_text">Il sistema trova il match esatto nel database delle offerte attive. La mansione è classificata come categoria_principale con has_custom_skills: true, il che significa che possiede un set di competenze specifico e verificato (Coinvolgimento, Stabilità emotiva, Flessibilità, ecc.). L'utente atterra direttamente sull'URL dedicato con 74 offerte attive.</p>
                </div>

                <div class="modal__example">
                    <h4 class="modal__example-title">
                        <span class="modal__example-badge modal__example-badge--alias" data-i18n="modal_example2_badge">Alias</span>
                        <span class="modal__example-name" data-i18n="modal_example2_search">Insegnante scuola dell'infanzia</span>
                        <button class="modal__copy-btn" data-copy="Insegnante scuola dell'infanzia" data-i18n-aria-label="modal_copy" aria-label="Copia">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </h4>
                    <p class="modal__example-text" data-i18n="modal_example2_text">Il sistema riconosce che l'utente ha cercato una variante specifica di una mansione più generica. Il mapping_type: alias indica che questa voce eredita URL e numero offerte dalla categoria principale di riferimento (categoria_riferimento: insegnante), ma mantiene le proprie soft skills distintive (Problem Solving, Coinvolgimento, Comunicazione, Ascolto, ecc.). L'utente viene indirizzato alla pagina "Insegnante" che contiene 1 offerta attiva, ricevendo però un profilo competenze calibrato sul ruolo specifico dell'infanzia.</p>
                </div>

                <div class="modal__example">
                    <h4 class="modal__example-title">
                        <span class="modal__example-badge modal__example-badge--incomplete" data-i18n="modal_example3_badge">Profilo Incompleto</span>
                        <span class="modal__example-name" data-i18n="modal_example3_search">Data Scientist</span>
                        <button class="modal__copy-btn" data-copy="Data Scientist" data-i18n-aria-label="modal_copy" aria-label="Copia">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </h4>
                    <p class="modal__example-text" data-i18n="modal_example3_text">Il sistema identifica una mansione presente nel database delle competenze ma priva di offerte attive sul sito Gi Group. Il mapping_type: profilo_incompleto segnala che url: null e numero_offerte: 0. Il motore carica comunque le 8 soft skills associate al ruolo (Iniziativa, Problem Solving, Analisi, Innovazione, ecc.) per completare il profilo dell'utente nella survey. Il frontend gestisce l'assenza di link mostrando un messaggio "Nessuna offerta attiva al momento", mantenendo il valore informativo delle competenze.</p>
                </div>

                <div class="modal__example">
                    <h4 class="modal__example-title">
                        <span class="modal__example-badge modal__example-badge--nomatch" data-i18n="modal_example4_badge">No Match</span>
                        <span class="modal__example-name" data-i18n="modal_example4_search">Influencer</span>
                        <button class="modal__copy-btn" data-copy="Influencer" data-i18n-aria-label="modal_copy" aria-label="Copia">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </h4>
                    <p class="modal__example-text" data-i18n="modal_example4_text">L'input non trova alcun riscontro nel database delle mansioni. Il frontend rileva l'assenza di match e attiva il protocollo di fallback caricando le skill universali (Problem Solving, Affidabilità, Collaborazione Teamwork) per completare comunque la survey, generando dinamicamente una ricerca generica sul sito Gi Group basata sul termine inserito. Questo evita che l'utente finisca in un vicolo cieco e garantisce continuità all'esperienza.</p>
                </div>

                <h4 class="modal__section-title" data-i18n="modal_extra_title">Casi Aggiuntivi da Verificare</h4>

                <div class="modal__example">
                    <h4 class="modal__example-title">
                        <span class="modal__example-badge modal__example-badge--warning" data-i18n="modal_example5_badge">Skills Mancanti</span>
                        <span class="modal__example-name" data-i18n="modal_example5_search">Magazziniere</span>
                        <button class="modal__copy-btn" data-copy="Magazziniere" data-i18n-aria-label="modal_copy" aria-label="Copia">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </h4>
                    <p class="modal__example-text" data-i18n="modal_example5_text">Il sistema trova la mansione tra le offerte attive (60 posizioni disponibili), ma il campo has_custom_skills: false e soft_skills: null indicano che non esistono competenze specifiche mappate nel database della struttura. Il frontend rileva il valore null e applica il set di skill universali per la survey, mantenendo l'URL valido verso le offerte reali.</p>
                </div>

                <div class="modal__example">
                    <h4 class="modal__example-title">
                        <span class="modal__example-badge modal__example-badge--error" data-i18n="modal_example6_badge">Doppio Null</span>
                        <span class="modal__example-name" data-i18n="modal_example6_search">Web Marketing Expert</span>
                        <button class="modal__copy-btn" data-copy="Web Marketing Expert" data-i18n-aria-label="modal_copy" aria-label="Copia">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </h4>
                    <p class="modal__example-text" data-i18n="modal_example6_text">Caso limite: la mansione esiste nel database struttura ma con url: null, soft_skills: null e numero_offerte: 0. Il frontend gestisce il doppio null mostrando "Nessuna offerta attiva" e applicando il fallback delle skill universali a livello di visualizzazione per garantire il completamento della survey.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Survey Presets -->
    <div id="surveyPresetsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="surveyPresetsModalTitle">
        <div class="modal__backdrop"></div>
        <div class="modal__content modal__content--presets">
            <div class="modal__header">
                <h3 id="surveyPresetsModalTitle" class="modal__title" data-i18n="survey_presets_modal_title">Simula Risultato</h3>
                <button id="surveyPresetsCloseBtn" class="modal__close" data-i18n-aria-label="modal_close" aria-label="Chiudi">&times;</button>
            </div>
            <div class="modal__body">
                <p class="survey-presets__description" data-i18n="survey_presets_description">Seleziona un archetipo per simulare il risultato del sondaggio.</p>
                <div class="survey-presets__blend-toggle">
                    <label class="survey-presets__blend-label">
                        <input type="checkbox" id="surveyPresetsBlendToggle">
                        <span class="survey-presets__toggle-slider"></span>
                        <span data-i18n="survey_presets_blend">Blend</span>
                    </label>
                </div>
                <div id="surveyPresetsGrid" class="survey-presets__grid">
                    <!-- Archetype cards will be rendered here by JS -->
                </div>
            </div>
        </div>
    </div>


    <script src="js/components.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/app.js"></script>
    <script src="js/survey.js"></script>
</body>
</html>
