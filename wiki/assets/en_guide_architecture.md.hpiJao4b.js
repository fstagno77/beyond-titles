import{_ as a,o as n,c as i,aj as e}from"./chunks/framework.BL7a9VP6.js";const k=JSON.parse('{"title":"Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"en/guide/architecture.md","filePath":"en/guide/architecture.md"}'),t={name:"en/guide/architecture.md"};function l(p,s,h,r,o,c){return n(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>Beyond Titles is a static Single Page Application (SPA), without frameworks and without a build step. The architecture follows a modular pattern based on separate JavaScript files by responsibility, with state managed locally in each module via IIFE (Immediately Invoked Function Expression).</p><h2 id="modules" tabindex="-1">Modules <a class="header-anchor" href="#modules" aria-label="Permalink to &quot;Modules&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>index.html</span></span>
<span class="line"><span>  ├── css/style.css          → Design system and component styles</span></span>
<span class="line"><span>  ├── js/components.js       → Header, footer, language toggle</span></span>
<span class="line"><span>  ├── js/i18n.js             → Translations and language detection</span></span>
<span class="line"><span>  ├── js/app.js              → Role search module (IIFE)</span></span>
<span class="line"><span>  └── js/survey.js           → Survey module (IIFE)</span></span></code></pre></div><h3 id="initialisation-sequence" tabindex="-1">Initialisation Sequence <a class="header-anchor" href="#initialisation-sequence" aria-label="Permalink to &quot;Initialisation Sequence&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. DOM Content Loaded</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>2. components.js</span></span>
<span class="line"><span>   → Renders header (logo + language toggle)</span></span>
<span class="line"><span>   → Renders footer (version + changelog link)</span></span>
<span class="line"><span>   → Initialises event listeners</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>3. i18n.js</span></span>
<span class="line"><span>   → Detects language (localStorage → browser → fallback &#39;en&#39;)</span></span>
<span class="line"><span>   → Creates global instance window.i18n</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>4. app.js (IIFE)</span></span>
<span class="line"><span>   → Initialises DOM references</span></span>
<span class="line"><span>   → Loads mansioni_database.json via Fetch</span></span>
<span class="line"><span>   → Connects search/autocomplete events</span></span>
<span class="line"><span>   → Manages Role tab visibility (?internal=true)</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>5. survey.js (IIFE)</span></span>
<span class="line"><span>   → Loads survey_archetypes.json via Fetch</span></span>
<span class="line"><span>   → Initialises survey selector</span></span>
<span class="line"><span>   → Configures SJT password modal</span></span></code></pre></div><h2 id="patterns-used" tabindex="-1">Patterns Used <a class="header-anchor" href="#patterns-used" aria-label="Permalink to &quot;Patterns Used&quot;">​</a></h2><h3 id="iife-for-encapsulation" tabindex="-1">IIFE for Encapsulation <a class="header-anchor" href="#iife-for-encapsulation" aria-label="Permalink to &quot;IIFE for Encapsulation&quot;">​</a></h3><p>Both <code>app.js</code> and <code>survey.js</code> use IIFEs to avoid polluting the global namespace:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* module local state */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* configuration */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... module logic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre></div><h3 id="event-driven-communication" tabindex="-1">Event-Driven Communication <a class="header-anchor" href="#event-driven-communication" aria-label="Permalink to &quot;Event-Driven Communication&quot;">​</a></h3><p>Modules communicate via <code>CustomEvent</code> on the DOM:</p><ul><li><code>languageChanged</code> — emitted by <code>i18n.js</code> when the user changes language, listened to by all modules to update translations</li></ul><h3 id="data-driven-ui" tabindex="-1">Data-Driven UI <a class="header-anchor" href="#data-driven-ui" aria-label="Permalink to &quot;Data-Driven UI&quot;">​</a></h3><p>The interface is entirely driven by JSON data:</p><ul><li>Roles and their properties (URL, soft skills, mapping type) come from the database</li><li>Questions, options, weights and archetype definitions come from the survey file</li></ul><h2 id="state-management" tabindex="-1">State Management <a class="header-anchor" href="#state-management" aria-label="Permalink to &quot;State Management&quot;">​</a></h2><h3 id="app-js-—-search-state" tabindex="-1">app.js — Search State <a class="header-anchor" href="#app-js-—-search-state" aria-label="Permalink to &quot;app.js — Search State&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mansioniPadre: [],           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Full array from database</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    isDataLoaded: boolean,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Data loading flag</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    activeSuggestionIndex: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Active suggestion index (keyboard nav)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currentSuggestions: [],      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Current filtered suggestions</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    selectedRole: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// User-selected role</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    generatedUrl: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Generated URL for the CTA</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currentScenario: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // &#39;match&#39; | &#39;no-match&#39; | null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="survey-js-—-survey-state" tabindex="-1">survey.js — Survey State <a class="header-anchor" href="#survey-js-—-survey-state" aria-label="Permalink to &quot;survey.js — Survey State&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    surveyData: {},              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Contents of survey_archetypes.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    selectedSurvey: string,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;bcb_v3&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currentQuestion: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Current question index (0-9)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    answers: [],                 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Array of user answers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    scores: {}                   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { archetypeName: accumulatedScore }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="localstorage" tabindex="-1">localStorage <a class="header-anchor" href="#localstorage" aria-label="Permalink to &quot;localStorage&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Key</th><th>Value</th><th>Module</th></tr></thead><tbody><tr><td><code>beyond-titles-lang</code></td><td><code>&#39;it&#39;</code> or <code>&#39;en&#39;</code></td><td>i18n.js</td></tr><tr><td><code>beyond-titles-survey-type</code></td><td><code>&#39;bcb_v3&#39;</code></td><td>survey.js</td></tr></tbody></table><h2 id="data-flows" tabindex="-1">Data Flows <a class="header-anchor" href="#data-flows" aria-label="Permalink to &quot;Data Flows&quot;">​</a></h2><h3 id="role-search-flow" tabindex="-1">Role Search Flow <a class="header-anchor" href="#role-search-flow" aria-label="Permalink to &quot;Role Search Flow&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>User input (typing)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Filtering mansioni_database.json (case-insensitive, substring match)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Rendering suggestions (max 15) with mapping type badges</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>User selection</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Scenario determination:</span></span>
<span class="line"><span>  ├── mapping_type === &quot;categoria_principale&quot; or &quot;alias&quot;</span></span>
<span class="line"><span>  │   → Green CTA → Specific job offers URL</span></span>
<span class="line"><span>  ├── mapping_type === &quot;profilo_incompleto&quot;</span></span>
<span class="line"><span>  │   → Purple CTA → Generic search URL</span></span>
<span class="line"><span>  └── No match in database</span></span>
<span class="line"><span>      → Orange CTA → Free search URL</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Log to System Activity Log</span></span></code></pre></div><h3 id="survey-flow" tabindex="-1">Survey Flow <a class="header-anchor" href="#survey-flow" aria-label="Permalink to &quot;Survey Flow&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Survey type selection → [Optional SJT password]</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>For each of the 10 questions:</span></span>
<span class="line"><span>  → User selects 1 option (single-choice)</span></span>
<span class="line"><span>  → Score accumulation: scores[archetype] += weight</span></span>
<span class="line"><span>  → Live scores table update in log</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Results calculation:</span></span>
<span class="line"><span>  → Archetype ranking by decreasing score (tie-break: alphabetical order)</span></span>
<span class="line"><span>  → Always a clear profile: a single dominant archetype</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Results rendering:</span></span>
<span class="line"><span>  → Primary card with archetype, claim, profile and soft skills</span></span></code></pre></div><h2 id="configurations" tabindex="-1">Configurations <a class="header-anchor" href="#configurations" aria-label="Permalink to &quot;Configurations&quot;">​</a></h2><h3 id="app-js" tabindex="-1">app.js <a class="header-anchor" href="#app-js" aria-label="Permalink to &quot;app.js&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    dataUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./data/mansioni_database.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    searchUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://www.gigroup.it/offerte-lavoro/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    maxSuggestions: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    minQueryLength: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    debounceDelay: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="survey-js" tabindex="-1">survey.js <a class="header-anchor" href="#survey-js" aria-label="Permalink to &quot;survey.js&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    W_BAR: &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">average</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SJT_PASSWORD: &#39;gigroup2026&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="accessibility" tabindex="-1">Accessibility <a class="header-anchor" href="#accessibility" aria-label="Permalink to &quot;Accessibility&quot;">​</a></h2><ul><li>ARIA attributes on all interactive controls (<code>role=&quot;tablist&quot;</code>, <code>role=&quot;tabpanel&quot;</code>, <code>role=&quot;listbox&quot;</code>, <code>role=&quot;log&quot;</code>, <code>role=&quot;dialog&quot;</code>)</li><li>Keyboard navigation in the suggestions dropdown (arrows + Enter + Escape)</li><li>Focus management in modals</li><li><code>escapeHtml()</code> function for XSS prevention</li></ul>`,36)])])}const u=a(t,[["render",l]]);export{k as __pageData,u as default};
